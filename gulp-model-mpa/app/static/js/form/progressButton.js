"use strict";!function(i){function s(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}Modernizr.addTest("csstransformspreserve3d",function(){var s,n=Modernizr.prefixed("transformStyle"),t="preserve-3d";return!!n&&(n=n.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-"),Modernizr.testStyles("#modernizr{"+n+":"+t+";}",function(t,e){s=i.getComputedStyle?getComputedStyle(t,null).getPropertyValue(n):""}),s===t)});var r=Modernizr.csstransitions,t=Modernizr.csstransforms3d&&Modernizr.csstransformspreserve3d,o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[Modernizr.prefixed("transition")];function e(t,e){this.button=t,this.options=s({},this.options),s(this.options,e),this._init()}e.prototype.options={statusTime:1500},e.prototype._init=function(){this._validate(),this._create(),this._initEvents()},e.prototype._validate=function(){null===this.button.getAttribute("data-style")&&this.button.setAttribute("data-style","fill"),null===this.button.getAttribute("data-vertical")&&null===this.button.getAttribute("data-horizontal")&&this.button.setAttribute("data-horizontal",""),t||null===this.button.getAttribute("data-perspective")||(this.button.removeAttribute("data-perspective"),this.button.setAttribute("data-style","fill"),this.button.removeAttribute("data-vertical"),this.button.setAttribute("data-horizontal",""))},e.prototype._create=function(){var t=document.createElement("span");t.className="content",t.innerHTML=this.button.innerHTML;var e=document.createElement("span");e.className="progress";var s=document.createElement("span");if(s.className="progress-inner",e.appendChild(s),this.button.innerHTML="",null!==this.button.getAttribute("data-perspective")){var n=document.createElement("span");n.className="progress-wrap",n.appendChild(t),n.appendChild(e),this.button.appendChild(n)}else this.button.appendChild(t),this.button.appendChild(e);this.progress=s,null!==this.button.getAttribute("data-horizontal")?this.progressProp="width":null!==this.button.getAttribute("data-vertical")&&(this.progressProp="height"),this._enable()},e.prototype._setProgress=function(t){this.progress.style[this.progressProp]=100*t+"%"},e.prototype._initEvents=function(){var s=this;this.button.addEventListener("click",function(){s.button.setAttribute("disabled",""),classie.remove(s.progress,"notransition"),classie.add(this,"state-loading"),setTimeout(function(){if("function"==typeof s.options.callback)s.options.callback(s);else{s._setProgress(1);var t=function t(e){r&&e.propertyName!==s.progressProp||(this.removeEventListener(o,t),s._stop())};r?s.progress.addEventListener(o,t):t.call()}},"fill"===s.button.getAttribute("data-style")||"top-line"===s.button.getAttribute("data-style")||"lateral-lines"===s.button.getAttribute("data-style")?0:200)})},e.prototype._stop=function(s){var n=this;setTimeout(function(){n.progress.style.opacity=0;var t=function t(e){r&&"opacity"!==e.propertyName||(this.removeEventListener(o,t),classie.add(n.progress,"notransition"),n.progress.style[n.progressProp]="0%",n.progress.style.opacity=1)};if(r?n.progress.addEventListener(o,t):t.call(),"number"==typeof s){var e=0<=s?"state-success":"state-error";classie.add(n.button,e),setTimeout(function(){classie.remove(n.button,e),n._enable()},n.options.statusTime)}else n._enable();classie.remove(n.button,"state-loading")},100)},e.prototype._enable=function(){this.button.removeAttribute("disabled")},i.ProgressButton=e}(window);